# [보충] TCP는 스트림(Stream)이다

"보낸 대로 받는다"는 착각을 버리세요.
TCP는 물호스(Stream)와 같습니다. 물을 한 바가지(100바이트) 부어도, 반대편에서는 쫄쫄쫄(10바이트씩 10번) 나올 수도 있고, 콸콸콸(한 번에) 나올 수도 있습니다.

## 1. Packet Fragmentation (패킷 쪼개짐)
- **상황**: 100바이트 패킷을 보냈는데, `recv`가 50바이트만 리턴함.
- **원인**: 네트워크 혼잡, MTU 제한 등.
- **해결**: 버퍼에 50바이트를 담아두고, 나머지 50바이트가 올 때까지 기다려야 함. (RingBuffer 사용)

## 2. Packet Coalescing (패킷 뭉침)
- **상황**: 10바이트 패킷 5개를 아주 빠르게 보냄. `recv`가 50바이트를 한 번에 리턴함.
- **원인**: Nagle 알고리즘 (작은 패킷을 모아서 보냄).
- **해결**: 받은 데이터를 파싱해서 10바이트씩 5번 잘라서 처리해야 함.

## 3. 결론
`recv` 리턴 값이 0(연결 종료)이나 -1(에러)이 아니면, **받은 만큼 버퍼에 쌓고 패킷 완성 여부를 체크**하는 로직이 반드시 필요합니다.
Week 24의 `RingBuffer`와 `PacketHandling` 예제가 바로 이걸 하는 겁니다.
