# 32μ£Όμ°¨: [Final] μµμΆ… μ•μ •ν™” λ° λ¶€ν• ν…μ¤νΈ

"λμ΄ μ•„λ‹ μƒλ΅μ΄ μ‹μ‘."
μ„λ²„λ¥Ό λ‹¤ λ§λ“¤μ—μ§€λ§, ν…μ¤νΈν•μ§€ μ•μ€ μ„λ²„λ” μ„λ²„κ°€ μ•„λ‹™λ‹λ‹¤.
**λ”λ―Έ ν΄λΌμ΄μ–ΈνΈ(Dummy Client)**λ¥Ό λ§λ“¤μ–΄ μ„λ²„λ¥Ό κ΄΄λ΅­ν€λ³΄κ³ , μ–Όλ§λ‚ λ²„ν‹°λ”μ§€ ν™•μΈν•©λ‹λ‹¤.

## 0. λ―Έλ¦¬ μ•λ©΄ μΆ‹μ€ μ©μ–΄ (Friendly Terms)
- **Dummy Client (λ”λ―Έ ν΄λΌμ΄μ–ΈνΈ)**: "λ΅λ΄‡ κµ°λ‹¨". μ‹¤μ  μ‚¬λμ΄ μ•„λ‹λΌ, ν”„λ΅κ·Έλ¨μ΄ μλ™μΌλ΅ μ΅°μΆ…ν•λ” κ°€μ§ ν”λ μ΄μ–΄λ“¤μ…λ‹λ‹¤.
- **Stress Test (μ¤νΈλ μ¤ ν…μ¤νΈ)**: "λ‚΄κµ¬λ„ μ‹¤ν—". μ„λ²„κ°€ μ–Όλ§λ‚ λ§μ€ μ‚¬λμ„ λ²„ν‹Έ μ μλ”μ§€, μΌλ¶€λ¬ μ—„μ²­λ‚ μ–‘μ λ°μ΄ν„°λ¥Ό λ³΄λ‚΄μ„ κ΄΄λ΅­ν€λ³΄λ” κ²ƒμ…λ‹λ‹¤.
- **CCU (Concurrent Users)**: "λ™μ‹ μ ‘μ†μ μ". μ§€κΈ μ΄ μκ°„ μ„λ²„μ— λ“¤μ–΄μ™€ μλ” μ‚¬λμ μ«μμ…λ‹λ‹¤.
- **TPS (Transactions Per Second)**: "μ΄λ‹Ή μ²λ¦¬ κ±΄μ". μ„λ²„κ°€ 1μ΄μ— μ–Όλ§λ‚ λ§μ€ μΌμ„ μ²λ¦¬ν•  μ μλ”μ§€ λ‚νƒ€λ‚΄λ” μ†λ„ λ‹¨μ„μ…λ‹λ‹¤.

## 1. ν•µμ‹¬ κ°λ…
### A. ν•™μµ λ©ν‘
- **Dummy Client**: μλ°± κ°μ μ—°κ²°μ„ μƒμ„±ν•κ³  μλ™μΌλ΅ λ©”μ‹μ§€λ¥Ό λ³΄λ‚΄λ” λ΄‡(Bot) κµ¬ν„.
- **Stress Test**: μ„λ²„μ ν•κ³„(λ™μ‹ μ ‘μ†μ μ, μ²λ¦¬λ‰) μΈ΅μ •.
- **νκ³ **: 32μ£Όκ°„μ μ—¬μ •μ„ μ •λ¦¬ν•κ³  λ¶€μ΅±ν• μ  νμ•….

### B. Theory Overview
- **Dummy Client**: μ„λ²„μ— λ¶€ν•λ¥Ό μ£ΌκΈ° μ„ν•΄ μλ°±~μμ² κ°μ μ—°κ²°μ„ μ‹λ®¬λ μ΄μ…ν•λ” ν…μ¤νΈ ν΄λΌμ΄μ–ΈνΈ κµ¬ν„λ²•μ„ λ‹¤λ£Ήλ‹λ‹¤.
- **Stress Testing**: λ™μ‹ μ ‘μ†μ μ(CCU)μ™€ μ²λ¦¬λ‰(TPS)μ„ μΈ΅μ •ν•μ—¬ μ„λ²„μ ν•κ³„λ¥Ό νμ•…ν•λ” λ°©λ²•λ΅ μ„ μ„¤λ…ν•©λ‹λ‹¤.
- **Monitoring**: μ‘μ—… κ΄€λ¦¬μλ‚ μ„±λ¥ λ¨λ‹ν„°λ¥Ό ν†µν•΄ CPU, λ©”λ¨λ¦¬, λ„¤νΈμ›ν¬ μ‚¬μ©λ‰μ„ κ΄€μΈ΅ν•λ” λ²•μ„ ν•™μµν•©λ‹λ‹¤.

## 2. μμ£Ό ν•λ” μ‹¤μ (Common Pitfalls)
> [!WARNING]
> **1. λ΅μ»¬ ν…μ¤νΈμ ν•κ³„**
> λ΅μ»¬νΈμ¤νΈ(127.0.0.1)μ—μ„ ν…μ¤νΈν•λ©΄ λ„¤νΈμ›ν¬ μ§€μ—°(Latency)κ³Ό ν¨ν‚· μ†μ‹¤μ΄ κ±°μ μ—†μ–΄ μ‹¤μ  ν™κ²½κ³Ό λ‹¤λ¦…λ‹λ‹¤.
> κ°€λ¥ν•λ©΄ λ‹¤λ¥Έ PCλ‚ ν΄λΌμ°λ“ μ„λ²„μ—μ„ ν…μ¤νΈν•μ—¬ μ‹¤μ  λ„¤νΈμ›ν¬ ν™κ²½μ„ λ¨μ‚¬ν•μ„Έμ”.

> [!TIP]
> **2. λ©”λ¨λ¦¬ λ„μ ν™•μΈ**
> λ¶€ν• ν…μ¤νΈλ¥Ό 1μ‹κ°„ μ΄μƒ λλ ¤λ†“κ³  λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ΄ κ³„μ† μ¦κ°€ν•λ‹¤λ©΄ λ„μ(Leak)κ°€ μλ” κ²ƒμ…λ‹λ‹¤.
> Visual Studioμ μ§„λ‹¨ λ„κµ¬(Diagnostic Tools)λ‚ Valgrindλ¥Ό μ‚¬μ©ν•μ—¬ λ„μ μ§€μ μ„ μ°Ύμ•„λ‚΄μ„Έμ”.

## 3. μ‹¤μµ κ°€μ΄λ“
### A. Dummy Client κµ¬μ΅°
μ„λ²„μ™€ λ‘κ°™μ΄ Asioλ¥Ό μ‚¬μ©ν•μ§€λ§, `Connect`λ¥Ό λΉ„λ™κΈ°λ΅ μ—¬λ¬ λ² νΈμ¶ν•λ‹¤λ” μ μ΄ λ‹¤λ¦…λ‹λ‹¤.
```cpp
for(int i=0; i<100; ++i) {
    auto client = make_shared<Client>(io, i);
    client->Connect("127.0.0.1", 9999);
}
```

## 4. Step-by-Step Guide
1. `build_cmake.bat`λ¥Ό μ‹¤ν–‰ν•μ—¬ μ„λ²„μ™€ λ”λ―Έ ν΄λΌμ΄μ–ΈνΈλ¥Ό λΉλ“ν•©λ‹λ‹¤.
2. `Debug/GameServer.exe`λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.
3. `Debug/DummyClient.exe`λ¥Ό μ‹¤ν–‰ν•μ—¬ 100~500λ…μ μ μ €κ°€ μ ‘μ†ν•λ” μƒν™©μ„ μ—°μ¶ν•©λ‹λ‹¤.
4. μ‘μ—… κ΄€λ¦¬μ(Task Manager)λ¥Ό μ—΄μ–΄ `GameServer.exe`μ CPU μ μ μ¨κ³Ό λ©”λ¨λ¦¬ λ³€ν™”λ¥Ό κ΄€μ°°ν•©λ‹λ‹¤.
5. μ„λ²„ μ½μ†”μ— λ΅κ·Έκ°€ μ •μƒμ μΌλ΅ μ°νλ”μ§€ ν™•μΈν•©λ‹λ‹¤.

## 5. λΉλ“ λ° μ‹¤ν–‰
**μ¤‘μ”**: ν„°λ―Έλ„μ„ μƒλ΅ μ—΄μ—λ‹¤λ©΄ λ¨Όμ € λ£¨νΈ ν΄λ”(`E:\repos\C++_Study`)μ `setup_env.bat`λ¥Ό μ‹¤ν–‰ν•΄μ£Όμ„Έμ”.

### λ°©λ²• A: CMake μ‚¬μ© (μλ™ μ¤ν¬λ¦½νΈ)
```powershell
.\build_cmake.bat
```

## 6. Diagram
```mermaid
flowchart LR
    subgraph Test Environment
        Server[Game Server]
        Dummy[Dummy Client Bot]
    end
    subgraph Monitoring
        TaskMgr[Task Manager]
        PerfMon[Performance Monitor]
    end
    
    Dummy -- 1. Connect (x100) --> Server
    Dummy -- 2. Send Random Packets --> Server
    Server -- 3. Process & Echo --> Dummy
    TaskMgr -.-> Server : Measure CPU/RAM
    PerfMon -.-> Server : Measure Network I/O
```

## 7. μ¶•ν•ν•©λ‹λ‹¤! π‰
32μ£Όκ°„μ κΈ΄ μ—¬μ •μ„ λ¬΄μ‚¬ν λ§μΉμ…¨μµλ‹λ‹¤.
μ΄μ  μ—¬λ¬λ¶„μ€ C++λ΅ κ³ μ„±λ¥ λ„¤νΈμ›ν¬ μ„λ²„λ¥Ό λ°”λ‹¥λ¶€ν„° μ„¤κ³„ν•κ³  κµ¬ν„ν•  μ μλ” λ¥λ ¥μ„ κ°–μ·„μµλ‹λ‹¤.
μ΄ ν”„λ΅μ νΈλ¥Ό ν¬νΈν΄λ¦¬μ¤λ΅ λ‹¤λ“¬κ±°λ‚, λ” λ³µμ΅ν• MMORPG μ„λ²„λ΅ ν™•μ¥ν•΄λ³΄μ„Έμ”!
